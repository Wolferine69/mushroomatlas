{% extends 'base.html' %}

{% block content %}
<h2>Nálezy hub</h2>
{% if user.is_authenticated %}
    <a class="nav-link" href="{% url 'add_finding' %}">Přidej nález</a>
{% endif %}
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script>
    var map = L.map('map').setView([49.5, 15.5], 7); // Nastavení počátečního zobrazení (např. Praha)

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',
    }).addTo(map);

    // Přidání markerů pro každý nález
    {% for finding in findings %}
    var marker = L.marker([{{ finding.latitude }}, {{ finding.longitude }}]).addTo(map)
        .bindPopup("<b>{{ finding.mushroom.name_cz }}</b><br />{{ finding.description }}");
    {% endfor %}
</script>
{% endblock %}